---
title: "Defining new scores"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Defining new scores}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(adoptr)
```

## Score classes in `adoptr`

In `adoptr` there are two custom score classes. 
Conditional scores represented by the class `ConditionalScore` and 
unconditional scores which are currently implemented as expected conditional
scores and therefore represented by the class `IntegralScore`.



### Conditional scores

A conditional score is the evaluation of a design property conditioned
on the first-stage outcome $X_1 = x_1$.

In `adoptr`, a conditional score as, e.g. conditional power, 
includes the following slots:

- `distribution`: the underlying data distribution. 

- `prior`: the prior distribution. 

The only data distribution that is currently supported is `Normal()`.
One can differentiate between two-armed designs (the default) and 
one-armed designs. It can easily be called by 

````{r distribution}
dist <- Normal(two_armed = FALSE)
```

The prior distribution is needed here to be able to compute the 
posterior distribution and evaluate the conditional score in case of continuation.
How to work and specify priors is described more detailed in the vignette
'working with priors'.

Every conditional score requires an evaluation method. 
This has to be defined as a method of three arguments. 

- the object of class `ConditionalScore` that is to be evaluated

- the `TwoStageDesign` used of evaluation

- the realisation of the test statistic $z_1$ where the score is evaluated.

Later in this vignette it is shown how one can define an own evaluation
method.
For the common cases conditional sample size and conditional power
such methods already exist in `adoptr` as will be shown below.



### Unconditional scores





## Preimplemented scores

### Sample Size

### Conditional Power  




## Defining a new score
